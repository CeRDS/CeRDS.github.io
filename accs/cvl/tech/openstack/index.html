<!doctype html><html lang=en-us>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>OpenStack - Characterisation eResearch & Data Science (CeRDS)</title>
<meta name=generator content="Hugo 0.89.4">
<link href=https://www.cerds.org.au//index.xml rel=alternate type=application/rss+xml>
<link rel=canonical href=https://www.cerds.org.au/accs/cvl/tech/openstack/>
<link rel=stylesheet href=https://www.cerds.org.au/css/theme.min.css>
<script src=https://use.fontawesome.com/releases/v5.0.6/js/all.js></script>
<link rel=stylesheet href=https://www.cerds.org.au/css/chroma.min.css>
<script src=https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script>
<script src=https://www.cerds.org.au/js/bundle.js></script><style>:root{}</style>
<meta property="og:title" content="OpenStack">
<meta property="og:description" content="Infrastructure as code ref., private repository
 https://github.com/CeRDS/deploy/tree/main/cvl  # Create initial CVL Stack openstack --os-cloud nimbus-cvl stack create -e env.yaml -t stack.yaml cvl # Update Stack on changes openstack --os-cloud nimbus-cvl stack update -e env.yaml -t stack.yaml cvl  Example Environment file  --- # env.yaml # Heat environment file parameters: dns_domain: uwa.edu.au floating_network: &#34;Public external&#34; floating_subnet: &#34;public-external-subnet&#34; image: &#34;Pawsey - Ubuntu 20.04 - 2021-02&#34; image_gpu: &#34;Pawsey - Ubuntu 20.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://www.cerds.org.au/accs/cvl/tech/openstack/"><meta property="article:section" content="accs">
<meta property="article:published_time" content="2021-09-23T09:33:00+08:00">
<meta property="article:modified_time" content="2021-09-23T09:33:00+08:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="OpenStack">
<meta name=twitter:description content="Infrastructure as code ref., private repository
 https://github.com/CeRDS/deploy/tree/main/cvl  # Create initial CVL Stack openstack --os-cloud nimbus-cvl stack create -e env.yaml -t stack.yaml cvl # Update Stack on changes openstack --os-cloud nimbus-cvl stack update -e env.yaml -t stack.yaml cvl  Example Environment file  --- # env.yaml # Heat environment file parameters: dns_domain: uwa.edu.au floating_network: &#34;Public external&#34; floating_subnet: &#34;public-external-subnet&#34; image: &#34;Pawsey - Ubuntu 20.04 - 2021-02&#34; image_gpu: &#34;Pawsey - Ubuntu 20.">
<meta itemprop=name content="OpenStack">
<meta itemprop=description content="Infrastructure as code ref., private repository
 https://github.com/CeRDS/deploy/tree/main/cvl  # Create initial CVL Stack openstack --os-cloud nimbus-cvl stack create -e env.yaml -t stack.yaml cvl # Update Stack on changes openstack --os-cloud nimbus-cvl stack update -e env.yaml -t stack.yaml cvl  Example Environment file  --- # env.yaml # Heat environment file parameters: dns_domain: uwa.edu.au floating_network: &#34;Public external&#34; floating_subnet: &#34;public-external-subnet&#34; image: &#34;Pawsey - Ubuntu 20.04 - 2021-02&#34; image_gpu: &#34;Pawsey - Ubuntu 20."><meta itemprop=datePublished content="2021-09-23T09:33:00+08:00">
<meta itemprop=dateModified content="2021-09-23T09:33:00+08:00">
<meta itemprop=wordCount content="1022">
<meta itemprop=keywords content></head>
<body><div class=container><header>
<h1>Characterisation eResearch & Data Science (CeRDS)</h1>
</header>
<div class=global-menu>
<nav>
<ul>
<li><a href=/>About</a></li></ul>
</nav>
</div>
<div class=content-container>
<main><h1>OpenStack</h1>
<p>Infrastructure as code ref., private repository</p>
<ul>
<li><a href=https://github.com/CeRDS/deploy/tree/main/cvl>https://github.com/CeRDS/deploy/tree/main/cvl</a></li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># Create initial CVL Stack</span>
openstack --os-cloud nimbus-cvl stack create -e env.yaml -t stack.yaml cvl

<span style=color:#75715e># Update Stack on changes</span>
openstack --os-cloud nimbus-cvl stack update -e env.yaml -t stack.yaml cvl
</code></pre></div><ul>
<li>Example Environment file</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>---
<span style=color:#75715e># env.yaml</span>
<span style=color:#75715e># Heat environment file</span>
<span style=color:#f92672>parameters</span>:
  <span style=color:#f92672>dns_domain</span>: <span style=color:#ae81ff>uwa.edu.au</span>
  <span style=color:#f92672>floating_network</span>: <span style=color:#e6db74>&#34;Public external&#34;</span>
  <span style=color:#f92672>floating_subnet</span>: <span style=color:#e6db74>&#34;public-external-subnet&#34;</span>
  <span style=color:#f92672>image</span>: <span style=color:#e6db74>&#34;Pawsey - Ubuntu 20.04 - 2021-02&#34;</span>
  <span style=color:#f92672>image_gpu</span>: <span style=color:#e6db74>&#34;Pawsey - Ubuntu 20.04 - vGPU CUDA 11 - 2021-06&#34;</span>
  <span style=color:#f92672>key_name</span>: <span style=color:#ae81ff>DEP53766</span>
  <span style=color:#f92672>network_external</span>: <span style=color:#e6db74>&#34;Public external&#34;</span>
  <span style=color:#f92672>subnet_pool</span>: <span style=color:#ae81ff>rfc1918</span>
  <span style=color:#f92672>server_cpu_count</span>: <span style=color:#ae81ff>0</span>
  <span style=color:#f92672>server_gpu_count</span>: <span style=color:#ae81ff>0</span>
  <span style=color:#f92672>server_login_count</span>: <span style=color:#ae81ff>0</span>
  <span style=color:#f92672>server_mgmt_count</span>: <span style=color:#ae81ff>0</span>

<span style=color:#f92672>resource_registry</span>:
  <span style=color:#f92672>&#34;OS::Custom::Server&#34;: </span><span style=color:#ae81ff>file:///path/to/server.yaml</span>

</code></pre></div>
<ul>
<li>Heat Orchestration Template (HOT)</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>heat_template_version</span>: <span style=color:#e6db74>2018-08-31</span>

<span style=color:#f92672>description</span>: <span style=color:#ae81ff>OS::Custom::Server</span>

<span style=color:#f92672>parameters</span>:
  <span style=color:#f92672>name</span>: { <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string }</span>
  <span style=color:#f92672>image</span>: { <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string }</span>
  <span style=color:#f92672>flavor</span>: { <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string }</span>
  <span style=color:#f92672>key_name</span>: { <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string }</span>
  <span style=color:#f92672>metadata</span>: { <span style=color:#f92672>type: json, default</span>: <span style=color:#e6db74>&#39;{}&#39;</span> }
  <span style=color:#f92672>network</span>: { <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string }</span>
  <span style=color:#f92672>networks</span>: { <span style=color:#f92672>type: json, default</span>: [] }
  <span style=color:#f92672>floating_network</span>: { <span style=color:#f92672>type: string, default</span>: <span style=color:#e6db74>&#34;None&#34;</span> }
  <span style=color:#f92672>security_groups</span>: { <span style=color:#f92672>type</span>: <span style=color:#ae81ff>json }</span>

<span style=color:#f92672>conditions</span>:
  <span style=color:#f92672>expose</span>:
    <span style=color:#f92672>not</span>:
      <span style=color:#f92672>equals</span>:
        - { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>floating_network }</span>
        - <span style=color:#e6db74>&#34;None&#34;</span>

<span style=color:#f92672>resources</span>:
  <span style=color:#f92672>port</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>OS::Neutron::Port</span>
    <span style=color:#f92672>properties</span>:
      <span style=color:#f92672>network</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>network }</span>
      <span style=color:#f92672>security_groups</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>security_groups }</span>

  <span style=color:#f92672>floating_ip</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>OS::Neutron::FloatingIP</span>
    <span style=color:#f92672>properties</span>:
      <span style=color:#f92672>floating_network</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>floating_network }</span>
      <span style=color:#f92672>port_id</span>: { <span style=color:#f92672>get_resource</span>: <span style=color:#ae81ff>port }</span>
    <span style=color:#f92672>condition</span>: <span style=color:#ae81ff>expose</span>

  <span style=color:#f92672>server</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>OS::Nova::Server</span>
    <span style=color:#f92672>properties</span>:
      <span style=color:#f92672>flavor</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>flavor }</span>
      <span style=color:#f92672>image</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>image }</span>
      <span style=color:#f92672>key_name</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>key_name }</span>
      <span style=color:#f92672>metadata</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>metadata }</span>
      <span style=color:#f92672>name</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>name }</span>
      <span style=color:#f92672>networks</span>:
        <span style=color:#f92672>list_concat</span>:
          - [{ <span style=color:#f92672>port</span>: { <span style=color:#f92672>get_resource</span>: <span style=color:#ae81ff>port } }]</span>
          - { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>networks }</span>
      <span style=color:#f92672>user_data</span>:
        <span style=color:#f92672>str_replace</span>:
          <span style=color:#f92672>params</span>:
            <span style=color:#ae81ff>${HOSTNAME}: { get_param: name }</span>
          <span style=color:#f92672>template</span>: |<span style=color:#e6db74>
</span><span style=color:#e6db74>            #cloud-config
</span><span style=color:#e6db74>            fqdn: ${HOSTNAME}
</span><span style=color:#e6db74>            locale: en_AU.utf8
</span><span style=color:#e6db74>            timezone: Australia/Perth
</span><span style=color:#e6db74>            packages:
</span><span style=color:#e6db74>            - haveged
</span><span style=color:#e6db74>            - python3
</span><span style=color:#e6db74>            - python3-pip
</span><span style=color:#e6db74>            package_update: true
</span><span style=color:#e6db74>            ssh_authorized_keys:
</span><span style=color:#e6db74>            - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC2TgwBfxieczdy3B/6XawtEPU7w+2aXHnmPhjg8Gh23/ZevlJNTS0PBSeLSjkJLCew1GVfowgdfH8rXnCMcj0ZSGjEthfM6Q4jrciPUp/f6CACmXDUoWInuE3S2sgGANG2Dy7KQSoJhhAROtdWN83CWUruZ8F8hNiQIwyoaL209LYmH07j7SQ/RFp+oo/V+LYtR58KSUKH41VL8isasGzhL+cvf1bHfxRi2DK8Jj1nPS/3i7j/XCXma5HNejEyTTovyv5CyGCxCyGYYhv0//vz8j232pAEMtsa/6sXwqA9maatcqM9oCObbm1TBrv7ndA5KhNNE/pMOQbmPjgFDdW45xszM/reqCJzl2j1E8ah5LLbrJl6bpMLaoyMmLOuMYtQz9sCVspUiIenEyk2EAw/fhjLWsWs1T1TUZF+Uv+gcnrljI0diN/0GVX5DlfBgsjDl59uLfZAC4zjeHEZ/YgswMK5qlv8HtmJUqT+vRD72zXp7n99E1gNcwpEqhthy50= 00078081@DEP53766
</span><span style=color:#e6db74>            - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDD8BDrtWHCZ2/lSc5WWGdx2k1u4HA8SIaapyd+Ko40k5ABhwKwI+E3scNXtzlhmT6ZcrlAulcfOWdr8X9/kwi4edllwad6vekitW2IQ9JaH8BptolYTf2w4qNnj33zdrnf/4t4O6bTUdKhc7CIqejKZX4JzZSQKiw9eta9tTPr8We7zhq5EoOdC2/3Bde2viH6c371WC+3aHbYpp9fCp0o+CUpdzpvNB4bMPcioDtXqnUHxJXFl+0/fR5s3srHqE0MGuiTm1YmoSl/fnkjKubx27Zbb2rP4fWj/aEUsGEkvLS46JegD/iGOzN9+bMrp4J4OBf4R2iN/qvo8zrmi+4vkWEnRYdpQk5yvUo2El08v8NK8zSVObva/928AZZDAxgAT+ZnzIE+PYxHtmeAa6C3faQbxbt9Z23s4RBGcRp7LfO/kyUOTDc2ni3JfgCAF/B4zSjOeisfZuN7gOM8lVelIIdaWhDWRvZH4mfB87euiTjxk+EFLWzULuduz4ojfik= dean.taylor@ghtmbp.gohitech.net
</span><span style=color:#e6db74>            - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDEft4lgAQwIAt1bjKmQhhHyGzeTT4HLs3r0iP9P5C7dcZ73XKAG2N7Iakmpyv8IwD6nTS1ytDagWHDN08nPxXN1nSaEh/SAeBaP7nckv++KRbVyAHyC7JwyDDaJw8NOZ/+u8USGLx3frIs2X1Z4YhnccPKpbINax9QHmV2+dcsjE+tVZ4RUxEW8zH/oGurLBxMDXmJ20Ln+P9/FxQpm3FLRnNZ3P41gc+Pp/Akqb7bLJp04Cgm6UOSEmSuvqwohmbsjX5B/KGn4guxcchSlAxKSxWZsaEfg3dGqh7Mv8WULHd+Ex4NVwHrngcgsP80YDCsl/hI1I29DscKxZ5liEfV5WHjtcxWPpQgz53qGhP0L1i7DnwlIOPWbSSwLV9dj6W5ugW6WvB9wDZF548FB8AReQ5dgmmsmC5cljpNKjlx6QR5VNalCBYDaAFH2bXu5huhVf8a8s2+lbCoEvQT4ilqbTTdAsr/RtEwa/k2bqw7S1B5l/F+Gj1VWN3ygOiNIcU= dean.taylor@dmav001.cmca.uwa.edu.au</span>            
      <span style=color:#f92672>user_data_format</span>: <span style=color:#ae81ff>RAW</span>
      <span style=color:#f92672>user_data_update_policy</span>: <span style=color:#ae81ff>IGNORE</span>

</code></pre></div>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>heat_template_version</span>: <span style=color:#e6db74>2018-08-31</span>

<span style=color:#f92672>description</span>: <span style=color:#ae81ff>Characterisation Virtual Laboritory</span>

<span style=color:#f92672>parameters</span>:
  <span style=color:#f92672>dns_domain</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string</span>
    <span style=color:#f92672>label</span>: <span style=color:#ae81ff>DNS domain</span>
    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>DNS domain</span>
    <span style=color:#f92672>default</span>: <span style=color:#ae81ff>uwa.edu.au</span>
  <span style=color:#f92672>dns_nameservers</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>comma_delimited_list</span>
    <span style=color:#f92672>label</span>: <span style=color:#ae81ff>DNS name servers</span>
    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>A comma delimited list of name servers</span>
    <span style=color:#f92672>default</span>: [<span style=color:#e6db74>&#34;1.1.1.1&#34;</span>,<span style=color:#e6db74>&#34;8.8.8.8&#34;</span>]
  <span style=color:#f92672>flavor</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string</span>
    <span style=color:#f92672>label</span>: <span style=color:#ae81ff>Instance type</span>
    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Image flavor to use for compute nodes</span>
    <span style=color:#f92672>default</span>: <span style=color:#ae81ff>n3.4c16r</span>
  <span style=color:#f92672>flavor_gpu</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string</span>
    <span style=color:#f92672>label</span>: <span style=color:#ae81ff>Instance type vGPU</span>
    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Image flavor to use for GPU compute nodes</span>
    <span style=color:#f92672>default</span>: <span style=color:#ae81ff>r1.V100-4C</span>
  <span style=color:#f92672>flavor_gpu_large</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string</span>
    <span style=color:#f92672>label</span>: <span style=color:#ae81ff>Instance type vGPU</span>
    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Image flavor to use for GPU compute nodes</span>
    <span style=color:#f92672>default</span>: <span style=color:#ae81ff>r1.V100-8C</span>
  <span style=color:#f92672>floating_network</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string</span>
    <span style=color:#f92672>label</span>: <span style=color:#ae81ff>Floating network name</span>
    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Floating network name</span>
    <span style=color:#f92672>default</span>: <span style=color:#e6db74>&#34;None&#34;</span>
  <span style=color:#f92672>floating_subnet</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string</span>
    <span style=color:#f92672>label</span>: <span style=color:#ae81ff>Floating subnet</span>
    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Floating subnet</span>
  <span style=color:#f92672>image</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string</span>
    <span style=color:#f92672>label</span>: <span style=color:#ae81ff>Image name</span>
    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Image name as server base</span>
    <span style=color:#f92672>default</span>: <span style=color:#e6db74>&#34;Pawsey - Ubuntu 20.04 - 2021-02&#34;</span>
  <span style=color:#f92672>image_gpu</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string</span>
    <span style=color:#f92672>label</span>: <span style=color:#ae81ff>Image name GPU</span>
    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Image name for server base (GPU)</span>
  <span style=color:#f92672>key_name</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string</span>
    <span style=color:#f92672>label</span>: <span style=color:#ae81ff>Key name</span>
    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Name of key-pair to be used for compute instance</span>
    <span style=color:#f92672>default</span>: <span style=color:#ae81ff>DEP53766</span>
  <span style=color:#f92672>network_external</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string</span>
    <span style=color:#f92672>label</span>: <span style=color:#ae81ff>External network</span>
    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>ID or name of the external network</span>
    <span style=color:#f92672>default</span>: <span style=color:#e6db74>&#34;Public external&#34;</span>
  <span style=color:#f92672>security_group_rules</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>json</span>
    <span style=color:#f92672>label</span>: <span style=color:#ae81ff>Firewall rules</span>
    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Additional firewall rules</span>
    <span style=color:#f92672>default</span>: []
  <span style=color:#f92672>server_cpu_count</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>number</span>
    <span style=color:#f92672>label</span>: <span style=color:#ae81ff>Compute node count</span>
    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Number of compute nodes to create</span>
    <span style=color:#f92672>default</span>: <span style=color:#ae81ff>0</span>
  <span style=color:#f92672>server_gpu_count</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>number</span>
    <span style=color:#f92672>label</span>: <span style=color:#ae81ff>GPU compute node count</span>
    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Number of GPU compute nodes to create</span>
    <span style=color:#f92672>default</span>: <span style=color:#ae81ff>0</span>
  <span style=color:#f92672>server_gpu_large_count</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>number</span>
    <span style=color:#f92672>label</span>: <span style=color:#ae81ff>GPU compute node large count</span>
    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Number of large GPU compute nodes to create</span>
    <span style=color:#f92672>default</span>: <span style=color:#ae81ff>0</span>
  <span style=color:#f92672>server_login_count</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>number</span>
    <span style=color:#f92672>label</span>: <span style=color:#ae81ff>Login node count</span>
    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Number of login nodes to create</span>
    <span style=color:#f92672>default</span>: <span style=color:#ae81ff>0</span>
  <span style=color:#f92672>server_mgmt_count</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>number</span>
    <span style=color:#f92672>label</span>: <span style=color:#ae81ff>Management node count</span>
    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Number of management nodes to create</span>
    <span style=color:#f92672>default</span>: <span style=color:#ae81ff>0</span>
  <span style=color:#f92672>subnet_host_routes</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>json</span>
    <span style=color:#f92672>label</span>: <span style=color:#ae81ff>static routes</span>
    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Static routes</span>
    <span style=color:#f92672>default</span>: []
  <span style=color:#f92672>subnet_pool</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string</span>
    <span style=color:#f92672>label</span>: <span style=color:#ae81ff>IPAM subnet pool name</span>
    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Project subnet pool name for IP range to be allocated from</span>
    <span style=color:#f92672>default</span>: <span style=color:#ae81ff>rfc1918</span>

<span style=color:#f92672>resources</span>:
  <span style=color:#f92672>network</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>OS::Neutron::Net</span>
    <span style=color:#f92672>properties</span>:
      <span style=color:#f92672>name</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>OS::stack_name }</span>

  <span style=color:#f92672>subnet</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>OS::Neutron::Subnet</span>
    <span style=color:#f92672>properties</span>:
      <span style=color:#f92672>name</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>OS::stack_name }</span>
      <span style=color:#f92672>network_id</span>: { <span style=color:#f92672>get_resource</span>: <span style=color:#ae81ff>network }</span>
      <span style=color:#f92672>dns_nameservers</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>dns_nameservers }</span>
      <span style=color:#f92672>host_routes</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>subnet_host_routes }</span>
      <span style=color:#f92672>subnetpool</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>subnet_pool }</span>

  <span style=color:#f92672>router</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>OS::Neutron::Router</span>
    <span style=color:#f92672>properties</span>:
      <span style=color:#f92672>admin_state_up</span>: <span style=color:#66d9ef>true</span>
      <span style=color:#f92672>external_gateway_info</span>:
        <span style=color:#f92672>network</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>network_external }</span>
      <span style=color:#f92672>name</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>OS::stack_name }</span>

  <span style=color:#f92672>router_if</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>OS::Neutron::RouterInterface</span>
    <span style=color:#f92672>properties</span>:
      <span style=color:#f92672>router</span>: { <span style=color:#f92672>get_resource</span>: <span style=color:#ae81ff>router }</span>
      <span style=color:#f92672>subnet</span>: { <span style=color:#f92672>get_resource</span>: <span style=color:#ae81ff>subnet }</span>

  <span style=color:#f92672>security_group</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>OS::Neutron::SecurityGroup</span>
    <span style=color:#f92672>properties</span>:
      <span style=color:#f92672>description</span>: <span style=color:#e6db74>&#34;Default security rules&#34;</span>
      <span style=color:#f92672>name</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>OS::stack_name }</span>
      <span style=color:#f92672>rules</span>:
        <span style=color:#f92672>list_concat</span>:
          - 
            - { <span style=color:#f92672>direction</span>: <span style=color:#ae81ff>egress }</span>
            - { <span style=color:#f92672>direction: egress, ethertype</span>: <span style=color:#e6db74>&#34;IPv6&#34;</span> }
            - { <span style=color:#f92672>remote_mode</span>: <span style=color:#ae81ff>remote_group_id }</span>
            - { <span style=color:#f92672>ethertype: IPv6, remote_mode</span>: <span style=color:#ae81ff>remote_group_id }</span>
          - { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>security_group_rules }</span>
        

  <span style=color:#f92672>expose_security_group</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>OS::Neutron::SecurityGroup</span>
    <span style=color:#f92672>properties</span>:
      <span style=color:#f92672>description</span>: <span style=color:#e6db74>&#34;Generic external security rules&#34;</span>
      <span style=color:#f92672>name</span>: { <span style=color:#f92672>list_join</span>: [<span style=color:#e6db74>&#39;-&#39;</span>,[{ <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>OS::stack_name }, &#34;expose&#34;]] }</span>
      <span style=color:#f92672>rules</span>:
        - { <span style=color:#f92672>port_range_max: 22, port_range_min: 22, protocol: tcp, remote_ip_prefix</span>: <span style=color:#e6db74>&#34;0.0.0.0/0&#34;</span> }

  <span style=color:#f92672>management</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>OS::Heat::ResourceGroup</span>
    <span style=color:#f92672>properties</span>:
      <span style=color:#f92672>count</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>server_mgmt_count }</span>
      <span style=color:#f92672>resource_def</span>:
        <span style=color:#f92672>type</span>: <span style=color:#ae81ff>OS::Custom::Server</span>
        <span style=color:#f92672>properties</span>:
          <span style=color:#f92672>flavor</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>flavor }</span>
          <span style=color:#f92672>image</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>image }</span>
          <span style=color:#f92672>key_name</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>key_name }</span>
          <span style=color:#f92672>metadata</span>:
            <span style=color:#f92672>groups</span>: <span style=color:#e6db74>&#34;management&#34;</span>
            <span style=color:#f92672>stack_name</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>OS::stack_name }</span>
          <span style=color:#f92672>name</span>: { <span style=color:#f92672>list_join</span>: [<span style=color:#e6db74>&#39;.&#39;</span>,[<span style=color:#e6db74>&#34;mgmt-%index%&#34;</span><span style=color:#f92672>, get_param: OS::stack_name, get_param</span>: <span style=color:#ae81ff>dns_domain]] }</span>
          <span style=color:#f92672>network</span>: { <span style=color:#f92672>get_resource</span>: <span style=color:#ae81ff>network }</span>
          <span style=color:#f92672>security_groups</span>:
            - { <span style=color:#f92672>get_resource</span>: <span style=color:#ae81ff>security_group }</span>

  <span style=color:#f92672>login</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>OS::Heat::ResourceGroup</span>
    <span style=color:#f92672>properties</span>:
      <span style=color:#f92672>count</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>server_login_count }</span>
      <span style=color:#f92672>resource_def</span>:
        <span style=color:#f92672>type</span>: <span style=color:#ae81ff>OS::Custom::Server</span>
        <span style=color:#f92672>properties</span>:
          <span style=color:#f92672>flavor</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>flavor }</span>
          <span style=color:#f92672>floating_network</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>floating_network }</span>
          <span style=color:#f92672>image</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>image }</span>
          <span style=color:#f92672>key_name</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>key_name }</span>
          <span style=color:#f92672>metadata</span>:
            <span style=color:#f92672>groups</span>: <span style=color:#e6db74>&#34;login&#34;</span>
            <span style=color:#f92672>stack_name</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>OS::stack_name }</span>
          <span style=color:#f92672>name</span>: { <span style=color:#f92672>list_join</span>: [<span style=color:#e6db74>&#39;.&#39;</span>,[<span style=color:#e6db74>&#34;login-%index%&#34;</span><span style=color:#f92672>, get_param: OS::stack_name, get_param</span>: <span style=color:#ae81ff>dns_domain]] }</span>
          <span style=color:#f92672>network</span>: { <span style=color:#f92672>get_resource</span>: <span style=color:#ae81ff>network }</span>
          <span style=color:#f92672>security_groups</span>:
            - { <span style=color:#f92672>get_resource</span>: <span style=color:#ae81ff>security_group }</span>
            - { <span style=color:#f92672>get_resource</span>: <span style=color:#ae81ff>expose_security_group }</span>

  <span style=color:#f92672>compute</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>OS::Heat::ResourceGroup</span>
    <span style=color:#f92672>properties</span>:
      <span style=color:#f92672>count</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>server_cpu_count }</span>
      <span style=color:#f92672>resource_def</span>:
        <span style=color:#f92672>type</span>: <span style=color:#ae81ff>OS::Custom::Server</span>
        <span style=color:#f92672>properties</span>:
          <span style=color:#f92672>flavor</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>flavor }</span>
          <span style=color:#f92672>image</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>image }</span>
          <span style=color:#f92672>key_name</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>key_name }</span>
          <span style=color:#f92672>metadata</span>:
            <span style=color:#f92672>groups</span>: <span style=color:#e6db74>&#34;compute,desktop&#34;</span>
            <span style=color:#f92672>stack_name</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>OS::stack_name }</span>
          <span style=color:#f92672>name</span>: { <span style=color:#f92672>list_join</span>: [<span style=color:#e6db74>&#39;.&#39;</span>,[<span style=color:#e6db74>&#34;desktop-%index%&#34;</span><span style=color:#f92672>, get_param: OS::stack_name, get_param</span>: <span style=color:#ae81ff>dns_domain]] }</span>
          <span style=color:#f92672>network</span>: { <span style=color:#f92672>get_resource</span>: <span style=color:#ae81ff>network }</span>
          <span style=color:#f92672>security_groups</span>:
            - { <span style=color:#f92672>get_resource</span>: <span style=color:#ae81ff>security_group }</span>

  <span style=color:#f92672>compute_gpu</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>OS::Heat::ResourceGroup</span>
    <span style=color:#f92672>properties</span>:
      <span style=color:#f92672>count</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>server_gpu_count }</span>
      <span style=color:#f92672>resource_def</span>:
        <span style=color:#f92672>type</span>: <span style=color:#ae81ff>OS::Custom::Server</span>
        <span style=color:#f92672>properties</span>:
          <span style=color:#f92672>flavor</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>flavor_gpu }</span>
          <span style=color:#f92672>image</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>image_gpu }</span>
          <span style=color:#f92672>key_name</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>key_name }</span>
          <span style=color:#f92672>metadata</span>:
            <span style=color:#f92672>groups</span>: <span style=color:#e6db74>&#34;gpu,desktop&#34;</span>
            <span style=color:#f92672>stack_name</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>OS::stack_name }</span>
          <span style=color:#f92672>name</span>: { <span style=color:#f92672>list_join</span>: [<span style=color:#e6db74>&#39;.&#39;</span>,[<span style=color:#e6db74>&#34;gpu-%index%&#34;</span><span style=color:#f92672>, get_param: OS::stack_name, get_param</span>: <span style=color:#ae81ff>dns_domain]] }</span>
          <span style=color:#f92672>network</span>: { <span style=color:#f92672>get_resource</span>: <span style=color:#ae81ff>network }</span>
          <span style=color:#f92672>security_groups</span>:
            - { <span style=color:#f92672>get_resource</span>: <span style=color:#ae81ff>security_group }</span>

  <span style=color:#f92672>compute_gpu_large</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>OS::Heat::ResourceGroup</span>
    <span style=color:#f92672>properties</span>:
      <span style=color:#f92672>count</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>server_gpu_large_count }</span>
      <span style=color:#f92672>resource_def</span>:
        <span style=color:#f92672>type</span>: <span style=color:#ae81ff>OS::Custom::Server</span>
        <span style=color:#f92672>properties</span>:
          <span style=color:#f92672>flavor</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>flavor_gpu_large }</span>
          <span style=color:#f92672>image</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>image_gpu }</span>
          <span style=color:#f92672>key_name</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>key_name }</span>
          <span style=color:#f92672>metadata</span>:
            <span style=color:#f92672>groups</span>: <span style=color:#e6db74>&#34;gpu,desktop&#34;</span>
            <span style=color:#f92672>stack_name</span>: { <span style=color:#f92672>get_param</span>: <span style=color:#ae81ff>OS::stack_name }</span>
          <span style=color:#f92672>name</span>: { <span style=color:#f92672>list_join</span>: [<span style=color:#e6db74>&#39;.&#39;</span>,[<span style=color:#e6db74>&#34;gpu-lg-%index%&#34;</span><span style=color:#f92672>, get_param: OS::stack_name, get_param</span>: <span style=color:#ae81ff>dns_domain]] }</span>
          <span style=color:#f92672>network</span>: { <span style=color:#f92672>get_resource</span>: <span style=color:#ae81ff>network }</span>
          <span style=color:#f92672>security_groups</span>:
            - { <span style=color:#f92672>get_resource</span>: <span style=color:#ae81ff>security_group }</span>

</code></pre></div>
<div class=edit-meta>
Last updated on 23 Sep 2021
<br>
Published on 23 Sep 2021
<br></div><nav class=pagination><a class="nav nav-prev" href=https://www.cerds.org.au/accs/cvl/tech/ansible/ title=Ansible><i class="fas fa-arrow-left" aria-hidden=true></i>&nbsp;Prev - Ansible</a>
<a class="nav nav-next" href=https://www.cerds.org.au/accs/cvl/user/ title="User documents">Next - User documents <i class="fas fa-arrow-right" aria-hidden=true></i></a>
</nav><footer><p class=powered>Powered by <a href=https://gohugo.io>Hugo</a>. Theme by <a href=https://themes.gohugo.io/hugo-theme-techdoc/>TechDoc</a>. Designed by <a href=https://github.com/thingsym/hugo-theme-techdoc>Thingsym</a>.</p>
</footer>
</main>
<div class=sidebar>
<nav class=open-menu>
<ul>
<li><a href=https://www.cerds.org.au/>Home</a></li>
<li><a href=https://www.cerds.org.au/arcos/>Australian Research Container Orchestration Services (ARCOS)</a>
<ul class=sub-menu>
<li><a href=https://www.cerds.org.au/arcos/present_202201/>ARCOS presentation 01/2022</a></li>
</ul>
</li>
<li class=parent><a href=https://www.cerds.org.au/accs/>The Australian Characterisation Commons at Scale (ACCS)</a>
<ul class=sub-menu>
<li class=parent><a href=https://www.cerds.org.au/accs/cvl/>Characterisation Virtual Laboratory (CVL@UWA)</a>
<ul class=sub-menu>
<li class=parent><a href=https://www.cerds.org.au/accs/cvl/tech/>Technical documents</a>
<ul class=sub-menu>
<li><a href=https://www.cerds.org.au/accs/cvl/tech/ansible/>Ansible</a></li>
<li class=active><a href=https://www.cerds.org.au/accs/cvl/tech/openstack/>OpenStack</a></li>
</ul>
</li>
<li><a href=https://www.cerds.org.au/accs/cvl/user/>User documents</a>
<ul class=sub-menu>
<li><a href=https://www.cerds.org.au/accs/cvl/user/access/>Access CVL@UWA</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=https://www.cerds.org.au/accs/trudat/>TruDat (MyTARDIS) data store</a></li>
</ul>
</li>
<li><a href=https://www.cerds.org.au/ais/>Australian Imaging Service (AIS)</a>
<ul class=sub-menu>
<li><a href=https://www.cerds.org.au/ais/tech/ml_clara/>Machine Learning (ML) and Clara</a></li>
<li><a href=https://www.cerds.org.au/ais/xnat/>XNAT</a></li>
</ul>
</li>
<li><a href=https://www.cerds.org.au/infrastructure/>Infrastructure as Code (IaC)</a>
<ul class=sub-menu>
<li><a href=https://www.cerds.org.au/infrastructure/juju/>Juju</a></li>
<li><a href=https://www.cerds.org.au/infrastructure/kubernetes/>Kubernetes, Helm and Kustomize</a></li>
</ul>
</li>
</ul>
</nav>
<div class=sidebar-footer><b>Contact us</b>
<a href=mailto:research-cmca@uwa.edu.au>research-cmca@uwa.edu.au</a>
</div>
</div>
</div><a href=# id=backtothetop-fixed class=backtothetop data-backtothetop-duration=600 data-backtothetop-easing=easeOutQuart data-backtothetop-fixed-fadein=1000 data-backtothetop-fixed-fadeout=1000 data-backtothetop-fixed-bottom=10 data-backtothetop-fixed-right=20>
<span class="fa-layers fa-fw">
<i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i>
</span></a>
</div>
</body>
</html>